<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Access Portal</title>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#0f172a,#1e293b);
    color:white;
}
.container{
    max-width:400px;
    margin:60px auto;
    background:#1e293b;
    padding:25px;
    border-radius:12px;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
}
h2{text-align:center;margin-bottom:20px;}
input,button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border-radius:6px;
    border:none;
}
input{background:#0f172a;color:white;}
button{
    background:#2563eb;
    color:white;
    cursor:pointer;
    font-weight:bold;
}
button:hover{background:#1d4ed8;}
.link{text-align:center;margin-top:10px;cursor:pointer;color:#60a5fa;}
.hidden{display:none;}
.dashboard{
    padding:20px;
}
.topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#111827;
    padding:15px;
}
.cards{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
    margin-top:20px;
}
.card{
    background:#1f2937;
    padding:20px;
    border-radius:10px;
    cursor:pointer;
    text-align:center;
    transition:0.3s;
}
.card:hover{
    background:#374151;
}
.page{
    padding:20px;
}
.success{
    text-align:center;
    padding:40px;
    font-size:18px;
}
</style>
</head>
<body>

<div id="authSection" class="container">
    <h2 id="authTitle">Login</h2>
    <input type="text" id="username" placeholder="Username (for register)">
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button onclick="handleAuth()">Continue</button>
    <div class="link" onclick="toggleMode()">Switch to Register / Login</div>
</div>

<div id="dashboardSection" class="hidden">
    <div class="topbar">
        <div>Welcome, <span id="displayName"></span></div>
        <button onclick="logout()">Logout</button>
    </div>
    <div class="dashboard">
        <p id="welcomeMessage"></p>
        <div class="cards">
            <div class="card" onclick="showPage('buyPage')">Buy Random Code</div>
            <div class="card" onclick="showPage('amountPage')">Accepting Amount</div>
            <div class="card" onclick="showPage('programPage')">Program With Us</div>
            <div class="card" onclick="showPage('withdrawPage')">Withdraw</div>
        </div>
    </div>
</div>

<div id="buyPage" class="page hidden">
    <h2>Buy Random Code</h2>
    <input type="number" placeholder="Enter amount">
    <button onclick="alert('Processing...')">Proceed</button>
    <button onclick="goBack()">Back</button>
</div>

<div id="amountPage" class="page hidden">
    <h2>Accepting Amount</h2>
    <input type="number" placeholder="Enter amount">
    <button onclick="alert('Submitted')">Submit</button>
    <button onclick="goBack()">Back</button>
</div>

<div id="programPage" class="page hidden">
    <h2>Program With Us</h2>
    <input type="text" placeholder="Full Name">
    <input type="text" placeholder="Qualification">
    <input type="text" placeholder="Experience">
    <button onclick="showPage('submittedPage')">Submit Application</button>
    <button onclick="goBack()">Back</button>
</div>

<div id="withdrawPage" class="page hidden">
    <h2>Withdraw</h2>
    <input type="number" placeholder="Enter amount">
    <button onclick="alert('Verification Required')">Proceed</button>
    <button onclick="goBack()">Back</button>
</div>

<div id="submittedPage" class="success hidden">
    <h2>Application Submitted Successfully</h2>
    <button onclick="goBack()">Return to Dashboard</button>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "PASTE_YOURS",
  authDomain: "PASTE_YOURS",
  projectId: "PASTE_YOURS",
  storageBucket: "PASTE_YOURS",
  messagingSenderId: "PASTE_YOURS",
  appId: "PASTE_YOURS"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let isLogin = true;

window.toggleMode = function(){
    isLogin = !isLogin;
    document.getElementById("authTitle").innerText = isLogin ? "Login" : "Register";
    document.getElementById("username").style.display = isLogin ? "none" : "block";
}

window.handleAuth = async function(){
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const username = document.getElementById("username").value;

    if(isLogin){
        await signInWithEmailAndPassword(auth,email,password);
    } else {
        const userCred = await createUserWithEmailAndPassword(auth,email,password);
        await setDoc(doc(db,"users",userCred.user.uid),{
            username:username,
            email:email
        });
    }
}

onAuthStateChanged(auth, async(user)=>{
    if(user){
        document.getElementById("authSection").classList.add("hidden");
        document.getElementById("dashboardSection").classList.remove("hidden");

        const docSnap = await getDoc(doc(db,"users",user.uid));
        if(docSnap.exists()){
            const name = docSnap.data().username;
            document.getElementById("displayName").innerText = name;
            document.getElementById("welcomeMessage").innerText =
            "Congratulations! You are among the most fortunate individuals to receive this private access link. You now have one exclusive opportunity.";
        }
    } else {
        document.getElementById("authSection").classList.remove("hidden");
        document.getElementById("dashboardSection").classList.add("hidden");
    }
});

window.logout = function(){
    signOut(auth);
}

window.showPage = function(id){
    document.getElementById("dashboardSection").classList.add("hidden");
    document.getElementById(id).classList.remove("hidden");
}

window.goBack = function(){
    document.querySelectorAll(".page,.success").forEach(p=>p.classList.add("hidden"));
    document.getElementById("dashboardSection").classList.remove("hidden");
}

</script>

</body>
      </html>
